import React, { useState } from 'react';

// --- INLINE ICONS (Replacing lucide-react imports to fix ReferenceError) ---

const BookOpen = ({ className }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
    </svg>
);

const Brain = ({ className }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path>
        <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"></path>
    </svg>
);

const GitMerge = ({ className }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <circle cx="18" cy="18" r="3"></circle>
        <circle cx="6" cy="6" r="3"></circle>
        <path d="M6 21V9a9 9 0 0 0 9 9"></path>
    </svg>
);

const Layers = ({ className }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
        <polyline points="2 17 12 22 22 17"></polyline>
        <polyline points="2 12 12 17 22 12"></polyline>
    </svg>
);

const Eye = ({ className }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
        <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
        <circle cx="12" cy="12" r="3"></circle>
    </svg>
);


// --- SVG GRAPHIC COMPONENTS ---

// 1. Simple View of Reading Graphic
const SimpleViewGraphic = () => (
    <svg viewBox="0 0 800 300" className="w-full h-auto bg-white rounded-lg shadow-inner p-4">
        <defs>
            <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                <path d="M0,0 L0,6 L9,3 z" fill="#4B5563" />
            </marker>
        </defs>
        
        {/* Decoding */}
        <g transform="translate(50, 80)">
            <rect x="0" y="0" width="200" height="100" rx="10" fill="#DBEAFE" stroke="#2563EB" strokeWidth="2"/>
            <text x="100" y="40" textAnchor="middle" className="text-xl font-bold fill-blue-900">Decoding (D)</text>
            <text x="100" y="70" textAnchor="middle" className="text-sm fill-blue-700">Word Recognition</text>
        </g>

        {/* Multiplier */}
        <text x="285" y="145" textAnchor="middle" className="text-6xl font-bold fill-gray-400">×</text>

        {/* Language Comp */}
        <g transform="translate(320, 80)">
            <rect x="0" y="0" width="200" height="100" rx="10" fill="#DCFCE7" stroke="#16A34A" strokeWidth="2"/>
            <text x="100" y="40" textAnchor="middle" className="text-xl font-bold fill-green-900">Language Comp (LC)</text>
            <text x="100" y="70" textAnchor="middle" className="text-sm fill-green-700">Oral Language</text>
        </g>

        {/* Equals */}
        <text x="555" y="145" textAnchor="middle" className="text-6xl font-bold fill-gray-400">=</text>

        {/* Reading Comp */}
        <g transform="translate(590, 80)">
            <rect x="0" y="0" width="200" height="100" rx="10" fill="#FAE8FF" stroke="#9333EA" strokeWidth="2"/>
            <text x="100" y="40" textAnchor="middle" className="text-xl font-bold fill-purple-900">Reading Comp (RC)</text>
            <text x="100" y="70" textAnchor="middle" className="text-sm fill-purple-700">Understanding Text</text>
        </g>

        {/* Annotations */}
        <text x="400" y="250" textAnchor="middle" className="text-sm italic fill-gray-500">If either D or LC is 0, Reading Comprehension is 0.</text>
    </svg>
);

// 2. Scarborough's Rope Graphic (Abstracted)
const RopeGraphic = () => (
    <svg viewBox="0 0 800 400" className="w-full h-auto bg-white rounded-lg shadow-inner p-4">
        {/* Labels Left */}
        <text x="20" y="100" className="font-bold fill-blue-800 text-lg">Language Comprehension</text>
        <text x="20" y="120" className="text-xs fill-gray-600">Background Knowledge</text>
        <text x="20" y="135" className="text-xs fill-gray-600">Vocabulary</text>
        <text x="20" y="150" className="text-xs fill-gray-600">Language Structures</text>
        <text x="20" y="165" className="text-xs fill-gray-600">Verbal Reasoning</text>

        <text x="20" y="280" className="font-bold fill-red-800 text-lg">Word Recognition</text>
        <text x="20" y="300" className="text-xs fill-gray-600">Phonological Awareness</text>
        <text x="20" y="315" className="text-xs fill-gray-600">Decoding</text>
        <text x="20" y="330" className="text-xs fill-gray-600">Sight Recognition</text>

        {/* Upper Strands (Blue) */}
        <path d="M200,120 C350,120 400,180 500,200" fill="none" stroke="#60A5FA" strokeWidth="6" />
        <path d="M200,135 C350,135 400,185 500,200" fill="none" stroke="#3B82F6" strokeWidth="6" />
        <path d="M200,150 C350,150 400,190 500,200" fill="none" stroke="#2563EB" strokeWidth="6" />
        
        {/* Lower Strands (Red) */}
        <path d="M200,300 C350,300 400,220 500,200" fill="none" stroke="#F87171" strokeWidth="6" />
        <path d="M200,315 C350,315 400,215 500,200" fill="none" stroke="#EF4444" strokeWidth="6" />
        <path d="M200,330 C350,330 400,210 500,200" fill="none" stroke="#DC2626" strokeWidth="6" />

        {/* The Rope (Twisted) */}
        <path d="M500,200 C600,200 600,180 750,190" fill="none" stroke="#4F46E5" strokeWidth="16" strokeLinecap="round"/>
        <path d="M500,200 C600,200 600,220 750,210" fill="none" stroke="#7C3AED" strokeWidth="16" strokeLinecap="round" opacity="0.7"/>

        {/* Outcome */}
        <text x="650" y="150" className="font-bold fill-indigo-900 text-xl">Skilled Reading</text>
        <text x="650" y="170" className="text-sm fill-gray-600">Fluent & Automatic</text>

        {/* Arrows */}
        <path d="M250,160 L300,180" stroke="black" strokeWidth="1" markerEnd="url(#arrow)" />
        <text x="280" y="155" className="text-xs italic" transform="rotate(20 280,155)">Strategic</text>

        <path d="M250,290 L300,220" stroke="black" strokeWidth="1" markerEnd="url(#arrow)" />
        <text x="270" y="300" className="text-xs italic" transform="rotate(-40 270,300)">Automatic</text>
    </svg>
);

// 3. 4-Part Processing Model Graphic
const FourPartGraphic = () => (
    <svg viewBox="0 0 800 500" className="w-full h-auto bg-white rounded-lg shadow-inner p-4">
        <defs>
            <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                <path d="M0,0 L0,6 L9,3 z" fill="#374151" />
            </marker>
        </defs>

        {/* Meaning */}
        <g transform="translate(300, 50)">
            <rect width="200" height="80" rx="8" fill="#FDE68A" stroke="#D97706" strokeWidth="2"/>
            <text x="100" y="45" textAnchor="middle" className="font-bold fill-amber-900">Meaning Processor</text>
        </g>

        {/* Phonological */}
        <g transform="translate(50, 200)">
            <rect width="200" height="80" rx="8" fill="#FECACA" stroke="#DC2626" strokeWidth="2"/>
            <text x="100" y="45" textAnchor="middle" className="font-bold fill-red-900">Phonological Processor</text>
            <text x="100" y="65" textAnchor="middle" className="text-xs fill-red-800">(Speech Input/Output)</text>
        </g>

        {/* Orthographic */}
        <g transform="translate(550, 200)">
            <rect width="200" height="80" rx="8" fill="#BFDBFE" stroke="#2563EB" strokeWidth="2"/>
            <text x="100" y="45" textAnchor="middle" className="font-bold fill-blue-900">Orthographic Processor</text>
            <text x="100" y="65" textAnchor="middle" className="text-xs fill-blue-800">(Print Input)</text>
        </g>

        {/* Context */}
        <g transform="translate(300, 350)">
            <rect width="200" height="80" rx="8" fill="#A7F3D0" stroke="#059669" strokeWidth="2"/>
            <text x="100" y="45" textAnchor="middle" className="font-bold fill-emerald-900">Context Processor</text>
        </g>

        {/* Connections */}
        {/* Ortho <-> Phono */}
        <line x1="250" y1="240" x2="550" y2="240" stroke="#374151" strokeWidth="3" markerEnd="url(#arrow2)" markerStart="url(#arrow2)"/>
        
        {/* Phono <-> Meaning */}
        <line x1="150" y1="200" x2="300" y2="90" stroke="#374151" strokeWidth="2" markerEnd="url(#arrow2)" markerStart="url(#arrow2)"/>
        
        {/* Ortho <-> Meaning */}
        <line x1="650" y1="200" x2="500" y2="90" stroke="#374151" strokeWidth="2" markerEnd="url(#arrow2)" markerStart="url(#arrow2)"/>

        {/* Meaning <-> Context */}
        <line x1="400" y1="130" x2="400" y2="350" stroke="#374151" strokeWidth="2" markerEnd="url(#arrow2)" markerStart="url(#arrow2)"/>

        <text x="400" y="230" textAnchor="middle" className="text-sm font-bold bg-white fill-gray-600">Phonics Connection</text>
    </svg>
);

// 4. Ehri's Phases Graphic
const EhriGraphic = () => (
    <svg viewBox="0 0 800 300" className="w-full h-auto bg-white rounded-lg shadow-inner p-4">
            {/* Timeline Line */}
            <line x1="50" y1="150" x2="750" y2="150" stroke="#E5E7EB" strokeWidth="8" strokeLinecap="round" />
            
            {/* Phase 1 */}
            <circle cx="100" cy="150" r="40" fill="#FCA5A5" />
            <text x="100" y="155" textAnchor="middle" className="font-bold fill-white text-xl">1</text>
            <text x="100" y="210" textAnchor="middle" className="font-bold text-sm fill-gray-800">Pre-Alphabetic</text>
            <text x="100" y="230" textAnchor="middle" className="text-xs fill-gray-500">"Visual Guessing"</text>

            {/* Phase 2 */}
            <circle cx="300" cy="150" r="40" fill="#FDBA74" />
            <text x="300" y="155" textAnchor="middle" className="font-bold fill-white text-xl">2</text>
            <text x="300" y="210" textAnchor="middle" className="font-bold text-sm fill-gray-800">Partial Alphabetic</text>
            <text x="300" y="230" textAnchor="middle" className="text-xs fill-gray-500">First/Last sounds</text>

            {/* Arrow */}
            <path d="M150,150 L250,150" stroke="#9CA3AF" strokeWidth="2" strokeDasharray="5,5"/>

            {/* Phase 3 */}
            <circle cx="500" cy="150" r="40" fill="#86EFAC" />
            <text x="500" y="155" textAnchor="middle" className="font-bold fill-white text-xl">3</text>
            <text x="500" y="210" textAnchor="middle" className="font-bold text-sm fill-gray-800">Full Alphabetic</text>
            <text x="500" y="230" textAnchor="middle" className="text-xs fill-gray-500">Complete Mapping</text>

            {/* Arrow */}
            <path d="M350,150 L450,150" stroke="#9CA3AF" strokeWidth="2" strokeDasharray="5,5"/>

            {/* Phase 4 */}
            <circle cx="700" cy="150" r="40" fill="#93C5FD" />
            <text x="700" y="155" textAnchor="middle" className="font-bold fill-white text-xl">4</text>
            <text x="700" y="210" textAnchor="middle" className="font-bold text-sm fill-gray-800">Consolidated</text>
            <text x="700" y="230" textAnchor="middle" className="text-xs fill-gray-500">Chunks & Automatic</text>
            
            {/* Arrow */}
            <path d="M550,150 L650,150" stroke="#9CA3AF" strokeWidth="2" strokeDasharray="5,5"/>
    </svg>
);

// 5. Dr. Strom's Reading Brain Graphic
const StromGraphic = () => (
    <svg viewBox="0 0 800 400" className="w-full h-auto bg-white rounded-lg shadow-inner p-4">
        {/* Brain Outline (Abstract) */}
        <path d="M100,200 C100,50 300,20 400,20 C500,20 700,50 700,200 C700,350 500,380 400,380 C300,380 100,350 100,200" fill="#F3F4F6" stroke="#D1D5DB" strokeWidth="4"/>

        {/* Sound City */}
        <circle cx="200" cy="200" r="60" fill="#E9D5FF" opacity="0.8" />
        <text x="200" y="190" textAnchor="middle" className="font-bold text-lg fill-purple-900">Sound City</text>
        <text x="200" y="210" textAnchor="middle" className="text-xs fill-purple-700">Auditory Cortex</text>
        <text x="200" y="225" textAnchor="middle" className="text-xs fill-purple-700">(Born with this)</text>

        {/* Vision Villages */}
        <circle cx="600" cy="250" r="60" fill="#BFDBFE" opacity="0.8" />
        <text x="600" y="240" textAnchor="middle" className="font-bold text-lg fill-blue-900">Vision Villages</text>
        <text x="600" y="260" textAnchor="middle" className="text-xs fill-blue-700">Visual Cortex</text>
        <text x="600" y="275" textAnchor="middle" className="text-xs fill-blue-700">(Object Recognition)</text>

        {/* Meaning Mountains */}
        <circle cx="400" cy="100" r="60" fill="#BBF7D0" opacity="0.8" />
        <text x="400" y="90" textAnchor="middle" className="font-bold text-lg fill-green-900">Meaning</text>
        <text x="400" y="110" textAnchor="middle" className="font-bold text-lg fill-green-900">Mountains</text>

        {/* The Highway */}
        <path d="M250,180 Q325,150 350,120" stroke="#F59E0B" strokeWidth="4" strokeDasharray="5,5" fill="none" />
        <path d="M550,230 Q475,200 450,120" stroke="#F59E0B" strokeWidth="4" strokeDasharray="5,5" fill="none" />
        
        {/* The Critical Connection (Phonics Highway) */}
        <path d="M600,200 C500,200 400,200 260,200" stroke="#EF4444" strokeWidth="12" strokeLinecap="round" />
        <line x1="260" y1="200" x2="600" y2="200" stroke="white" strokeWidth="2" strokeDasharray="10,10"/>
        
        <text x="430" y="190" textAnchor="middle" className="font-bold text-xs fill-red-900 bg-white">Neural Highway (Letter-Sound)</text>
        <text x="430" y="230" textAnchor="middle" className="text-xs italic fill-gray-500">Must be built!</text>
    </svg>
);


// --- MAIN APP COMPONENT ---

const models = [
    {
        id: 'simple-view',
        title: 'Simple View of Reading',
        author: 'Gough & Tunmer, 1986',
        summary: 'Reading is not a single skill, but the product of two distinct capacities: Decoding (reading words) and Language Comprehension (understanding speech). If either is weak, reading comprehension fails.',
        keyPoint: 'Decoding × Language Comprehension = Reading Comprehension',
        component: <SimpleViewGraphic />,
        icon: <BookOpen className="w-5 h-5"/>
    },
    {
        id: 'rope',
        title: "Scarborough's Reading Rope",
        author: 'Hollis Scarborough, 2001',
        summary: 'Visualizes the complexity of skilled reading. "Upper strands" (language comprehension) become strategic, while "lower strands" (word recognition) become automatic. They weave together to produce fluent reading.',
        keyPoint: 'Word recognition must become automatic so the brain can focus on meaning.',
        component: <RopeGraphic />,
        icon: <GitMerge className="w-5 h-5"/>
    },
    {
        id: 'processing',
        title: '4-Part Processing Model',
        author: 'Seidenberg & McClelland, 1989',
        summary: 'A connectionist model showing the brain as a machine with four processors. Efficient reading relies on the Phonological (Sound) and Orthographic (Vision) processors working together to access Meaning. Context is only a support, not the driver.',
        keyPoint: 'Reliance on context to guess words is a sign of poor reading, not skilled reading.',
        component: <FourPartGraphic />,
        icon: <Layers className="w-5 h-5"/>
    },
    {
        id: 'ehri',
        title: "Ehri's Phases of Word Reading",
        author: 'Linnea Ehri, 1995',
        summary: 'Describes the timeline of development. Students move from "gluing" visual cues to meaning (McDonalds arches) to fully connecting every letter to a sound (Orthographic Mapping), eventually reading in chunks.',
        keyPoint: 'We do not memorize words visually; we map them phoneme-grapheme.',
        component: <EhriGraphic />,
        icon: <Eye className="w-5 h-5"/>
    },
    {
        id: 'strom',
        title: "Dr. Strom's Reading Brain",
        author: 'Dr. Carolyn Strom',
        summary: 'A metaphor for neuroscience. We have "Sound City" and "Vision Villages" disconnected by nature. We must build a neural "Super Highway" to connect them, allowing us to access "Meaning Mountains".',
        keyPoint: 'Reading is not natural; it is a construction project in the brain.',
        component: <StromGraphic />,
        icon: <Brain className="w-5 h-5"/>
    }
];

export default function App() {
    const [activeModel, setActiveModel] = useState(models[0]);

    return (
        <div className="min-h-screen pb-12 bg-gray-100 font-sans">
            {/* Inline Styles for Animation */}
            <style>{`
                @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Merriweather:ital,wght@0,300;0,700;1,300&display=swap');
                
                body { font-family: 'Inter', sans-serif; }
                h1, h2, h3, h4 { font-family: 'Merriweather', serif; }

                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in {
                    animation: fadeIn 0.5s ease-in-out;
                }
            `}</style>

            {/* Header */}
            <header className="bg-slate-900 text-white p-8 shadow-lg">
                <div className="max-w-6xl mx-auto">
                    <div className="flex items-center space-x-4 mb-4">
                        <span className="bg-blue-600 text-xs font-bold px-2 py-1 rounded uppercase tracking-wider">EDU 301: Foundations of Literacy</span>
                        <span className="text-slate-400 text-xs uppercase tracking-wider">Module 3</span>
                    </div>
                    <h1 className="text-4xl font-bold mb-2">Theoretical Models of Reading</h1>
                    <p className="text-slate-300 text-lg max-w-2xl">
                        Welcome, class. Please review the five core frameworks below. Select a tab to view the visualization and summary for each model.
                    </p>
                </div>
            </header>

            {/* Main Content Area */}
            <main className="max-w-6xl mx-auto mt-8 px-4 flex flex-col md:flex-row gap-8">
                
                {/* Navigation / Sidebar */}
                <nav className="w-full md:w-1/4 flex flex-col space-y-2">
                    <h3 className="text-slate-500 font-bold uppercase text-xs tracking-wider mb-2">Select a Model</h3>
                    {models.map((model) => (
                        <button
                            key={model.id}
                            onClick={() => setActiveModel(model)}
                            className={`flex items-center space-x-3 text-left px-4 py-4 rounded-lg transition-all duration-200 border-l-4 ${
                                activeModel.id === model.id
                                    ? 'bg-white border-blue-600 shadow-md text-blue-900 font-bold'
                                    : 'bg-white/50 border-transparent text-slate-600 hover:bg-white hover:text-slate-900'
                            }`}
                        >
                            <span>{model.icon}</span>
                            <span>{model.title}</span>
                        </button>
                    ))}
                    
                    <div className="mt-8 bg-blue-50 p-4 rounded-lg border border-blue-100">
                        <h4 className="font-bold text-blue-900 text-sm mb-2">Professor's Note:</h4>
                        <p className="text-sm text-blue-800 leading-relaxed">
                            Notice how models 3, 4, and 5 all emphasize the critical connection between <strong>Vision</strong> and <strong>Sound</strong>. This is the "secret sauce" of literacy.
                        </p>
                    </div>
                </nav>

                {/* Interactive Card */}
                <section className="w-full md:w-3/4">
                    <div key={activeModel.id} className="bg-white rounded-xl shadow-xl overflow-hidden border border-slate-200 animate-fade-in">
                        
                        {/* Card Header */}
                        <div className="p-8 border-b border-slate-100">
                            <div className="flex flex-col md:flex-row justify-between items-start md:items-baseline mb-2">
                                <h2 className="text-3xl font-serif text-slate-900">{activeModel.title}</h2>
                                <span className="text-sm font-mono text-slate-500 mt-2 md:mt-0">{activeModel.author}</span>
                            </div>
                            <p className="text-lg text-slate-700 leading-relaxed mt-4">
                                {activeModel.summary}
                            </p>
                        </div>

                        {/* Graphic Area */}
                        <div className="p-8 bg-slate-50 flex justify-center">
                            <div className="w-full max-w-3xl">
                                {activeModel.component}
                            </div>
                        </div>

                        {/* Footer / Key Takeaway */}
                        <div className="p-6 bg-slate-800 text-white">
                            <div className="flex items-start space-x-3">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-yellow-400 mt-1 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                <div>
                                    <h4 className="font-bold text-yellow-400 uppercase text-xs tracking-wider mb-1">Critical Takeaway</h4>
                                    <p className="text-slate-200 font-medium">{activeModel.keyPoint}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    );
};
